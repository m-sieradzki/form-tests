<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9 ]><html class="ie9 no-js"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->

  <head>
    <title>form-test</title>

    <meta name="author" content="">
    <meta name="description" content="">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/input-autogrow/1.1.0/input-autogrow.min.js"></script>

    <link rel="stylesheet" href="stylesheet.css" />

  </head>
    <body>

      <form class="form" name="Hustler" method="POST" netlify>
        <label for="fullname" class="stroke">
          I nominate&nbsp;
        </label>
        <div class="field">
          <input type="text" class="preview preview-name" id="Name" data-copy="#name" name="Name" required placeholder="name">&nbsp;
        </div>
        <label for="fullname" class="stroke">
          &#32;because they are &nbsp;
        </label>
        <div class="field">
          <input type="text" class="preview preview-reason" data-copy="#reason" name="Reason" required placeholder="reason">
        </div>
        <label for="fullname" class="stroke">
          &nbsp;Tell them &nbsp;
        </label>
        <div class="field">
          <input type="text" class="preview preview-reason" data-copy="#sender" name="Sender" required placeholder="your name">
        </div>
        <label for="fullname" class="stroke">
          &nbsp;did it.
        </label>
        <label for="fullname" class="stroke">
          Oh and here's where to tell them:&nbsp;
        </label>
        <div class="field">
          <input type="email" class="preview preview-reason" data-copy="#sender" name="Sender" required placeholder="email">
        </div>
        <label for="fullname" class="stroke">
          .
        </label>
        <input type="file" name="image" required placeholder="file">
        <button type="submit">Nominate</button>
      </form>

      <div id="capture">
        <span class="stroke-two">
          You nominate&nbsp;
        </span>
        <span id="reason"><span class="stroke-two">
          because&nbsp;
        </span></span>
        <br><br><br>
        <!-- <span class="stroke">
        <svg xmlns="http://www.w3.org/2000/svg" width="640" height="100" viewBox="0 0 640 72">
        <text x="0" y="64">Outline 1</text>
        </svg></span>
        <span class="stroke-two">
        Outline 2
        </span>-->
      </div>

      <div id="show">
      SHOW
      </div>

      <div id="save">
      SAVE
      </div>

      <div id="artboard">
      </div>

      <img id="testimage" src="file-name.png"></img>

      <script type="text/javascript">
        $(document).ready(function() {


$('input').inputAutogrow({
minWidth: 50,
trailingSpace: -100
});

  $(".preview").on('keyup', function() {
    $("#capture").html('<strong class="stroke-two">You nominate&#32; </strong>' + $(".preview-name").val() + "&#32;" + '<strong class="stroke-two">because&#32;</strong>' + $(".preview-reason").val());
  });
});


$("#show").click(function() {

html2canvas(document.querySelector("#capture")).then(canvas => {
  document.querySelector("#artboard").appendChild(canvas);
  var ctx = canvas.getContext("2d");
});
});

$("#save").click(function() {

html2canvas(document.querySelector("#capture")).then(canvas => {
  saveAs(canvas.toDataURL('image/png'), 'file-name.png');
});
});

function saveAs(uri, filename) {

var link = document.createElement('a');

if (typeof link.download === 'string') {

    link.href = uri;
    link.download = filename;

    //Firefox requires the link to be in the body
    document.body.appendChild(link);

    //simulate click
    link.click();

    //remove the link when done
    document.body.removeChild(link);

} else {

    window.open(uri);

}
}

        </script>

    </body>
  </html>
